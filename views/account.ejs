<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("partials/head") %>
    <link rel="stylesheet" href="/stylesheets/slick.css" />
    <link rel="stylesheet" href="/stylesheets/slick-theme.css" />
    <style>
      .mainDiv {
        margin: auto auto;
        padding: 30px;
        transform: translate(0, 10%);
        width: 1000px;
        border: 3px solid rgb(106, 204, 111);
        border-radius: 5%;
        position: relative;
      }
      .accountHeadline {
        text-align: center;
      }
      .hello {
        font-size: xx-large;
        margin-bottom: 5%;
      }
      .editDetailsBtn {
        font-size: large;
        color: rgb(137, 190, 150);
      }
      .editDetailsBtn:hover {
        color: #10c562;
      }
      .sectionHeadline {
        border-bottom: 3px solid green;
        font-size: larger;
      }
      .carousel {
        width: 100%;
        margin: 5% auto;
        /* border: 2px solid blue; */
      }
      .slick-slide {
        direction: ltr;
        margin: 10px;
        /* width: 200px; */
        /* border: 2px solid red; */
      }
      .slick-slide img {
        width: 100%;
        /* border: blue solid 2px; */
      }
      .slick-prev:before {
        color: green;
        font-size: x-large;
      }
      .slick-next:before {
        color: green;
        font-size: x-large;
      }
      .navBarStyle {
        background-color: rgb(106, 204, 111);
      }
    </style>
  </head>
  <body>
    <div id="wrapper">
      <div class="container">
        <%- include("partials/navbar", {firstName: firstName}) %>
        <div class="mainDiv">
          <h2 class="accountHeadline">איזור אישי</h2>

          <div class="hello">
            שלום <%= firstName %>,
            <small class="form-text "
              ><a href="/edit" class="editDetailsBtn">עריכת פרטים</a></small
            >
          </div>

          <div class="sectionHeadline">הכרטיסים שלך</div>

          <div class="carousel">
            <% if (cards.length === 0) { %> אין לך כרטיסים <% } else{ %> <%
            cards.forEach(function(card) { if (card.finalCardPicUrl) { %>
            <div class="imgSlidePosition">
              <a href="/cards/<%- card._id %>/edit">
                <img class="" src="<%- card.finalCardPicUrl %>" width="800px"
              /></a>
            </div>

            <% }}) }%>
          </div>
        </div>
      </div>
    </div>
    <%- include("partials/footer") %>
    <!-- Slick carousel -->
    <script src="/javascript/slick.min.js"></script>
    <script>
      let picNum =
        $(".imgSlidePosition").length <= 3
          ? 0
          : $(".imgSlidePosition").length + 9;

      $(document).ready(function() {
        $(".carousel").slick({
          slidesToShow: 3,
          infinite: true,
          dots: true,
          centerMode: true,
          initialSlide: 0,
          lazyLoad: "progressive" //ondemand
          // variableWidth: true
        });

        for (let div of $(".imgSlidePosition")) {
          div.style.transform = `translate(calc(${picNum} * 200px), 0)`;
        }
      });
    </script>
  </body>
</html>
